# Swift本质探究-01



>  我们学习一门语言的时候最重要的事情就是弄清楚其在计算机内存的本质。







## 1 Swift类和结构体

在所有的高级语言当中，都有类和结构体的概念，因为**类和结构体是所有计算机程序语言中最基础的逻辑单元**。

当我们在写类和结构体的时候，我们到底在写什么呢？

我们了解他们的内存结构吗？

为什么他们被设计成不同的内存结构并具有各自的特性呢？



二 内存区域的简介

它们都可以声明不同类型的变量，并执行一定的方法和操作，然后在不同的时机被操作系统回收。

程序的本质是一堆0和1的排列组合

一个bit可以表示布尔类型的数值

8个bit可以表示 0到255以内的Int数值类型

我们所熟知的控制逻辑，if else，switch case，for in等等，本质上也是内存中的地址跳转



```swift
struct StructPoint {
  var x, y: Double
}

class ClassPoint {
  var x, y: Double
  init(x: Double, y: Double) { (self.x, self.y) = (x, y) }
}
```

类和结构体的不同之处

1. 的初始化函数

2. 复制的机制不同

3. 可改变的范围不同

4. Heap和Stack

5. 生命周期和identity

6. 其他的不同之处

   

###  1.1 相同点

 - 都可以声明属性和方法

 - 定义方法

 - 定义初始化器

 - 都可以使用extension扩展功能

 - 遵循协议来提供特定的功能

   

### 1.2 不同点

- 类可以继承的特性，结构体不能继承
- 类具有动态性，可以在运行时
- 类具有析构函数来释放自身资源
- 类使用引用计数，结构体是值类型



<img src="/Users/marlonleng/Library/Application Support/typora-user-images/image-20211226212048798.png" alt="image-20211226212048798" style="zoom:33%;" />





2 类和结构体的生命周期	

	- 初始化函数 init

 - 析构函数 deinit



3 

三 类和结构体的性能测试

